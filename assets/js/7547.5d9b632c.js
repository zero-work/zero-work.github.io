"use strict";(self.webpackChunklearn_data=self.webpackChunklearn_data||[]).push([[7547],{7547:(t,e,a)=>{a.r(e),a.d(e,{GoogleCastLoader:()=>l});var r=a(5181),o=a(9256),n=a(5521),s=a(555),c=a(8332),i=a(5242);class l{constructor(){this.name="google-cast"}get cast(){return(0,c.g)()}mediaType(){return"video"}canPlay(t){return s.I&&!s.a&&(0,o.c)(t)}async prompt(t){let e;try{const a=await this.Pl(t);this.aa||(this.aa=new cast.framework.RemotePlayer,new cast.framework.RemotePlayerController(this.aa)),e=t.player.createEvent("google-cast-prompt-open",{trigger:a}),t.player.dispatchEvent(e),this.pm(t,"connecting",e),await this.Rl((0,i.u)(t.$props.googleCast)),t.$state.remotePlaybackInfo.set({deviceName:(0,c.a)()?.getCastDevice().friendlyName}),(0,c.i)()&&this.pm(t,"connected",e)}catch(e){const a=(0,r.c)(e);throw this.pm(t,(0,c.i)()?"connected":"disconnected",new i.D("google-cast-prompt-error",{detail:a})),a}finally{t.player.dispatch("google-cast-prompt-close",{trigger:e})}}async load(t){if(!this.aa)throw Error("[vidstack] google cast player was not initialized");return new((await a.e(8994).then(a.bind(a,8994))).GoogleCastProvider)(this.aa,t)}async Pl(t){if((0,c.h)())return;const e=t.player.createEvent("google-cast-load-start");t.player.dispatch(e),await(0,n.l)((0,c.e)()),await customElements.whenDefined("google-cast-launcher");const a=t.player.createEvent("google-cast-loaded",{trigger:e});if(t.player.dispatch(a),!(0,c.b)())throw Error("Cast not available.");return a}async Rl(t){this.Tl(t);const e=await this.cast.requestSession();if(e)throw Error((0,c.c)(e))}Tl(t){this.cast?.setOptions({...(0,c.d)(),...t})}pm(t,e,a){const r={type:"google-cast",state:e};t.delegate.c("remote-playback-change",r,a)}}},8332:(t,e,a)=>{a.d(e,{a:()=>l,b:()=>s,c:()=>p,d:()=>u,e:()=>o,f:()=>d,g:()=>i,h:()=>n,i:()=>c,j:()=>g,l:()=>h});var r=a(1801);function o(){return"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"}function n(){return!!window.cast?.framework}function s(){return!!window.chrome?.cast?.isAvailable}function c(){return i().getCastState()===cast.framework.CastState.CONNECTED}function i(){return window.cast.framework.CastContext.getInstance()}function l(){return i().getCurrentSession()}function d(){return l()?.getSessionObj().media[0]}function g(t){const e=d()?.media.contentId;return e===t?.src}function u(){return{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0}}function p(t){return`Google Cast Error Code: ${t}`}function h(t,e){return(0,r.l)(i(),t,e)}}}]);